<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rider Dashboard - ErrandX</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chart.js for earnings chart -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- THEME LOADER - Add this line -->
    <script src="../theme/theme-loader.js" defer></script>
    
    <style>
        :root {
            /* Professional Color Palette */
            --primary-green: #5CC47E;
            --primary-dark: #1F4B2E;
            --primary-light: #E8F5E9;
            --secondary-blue: #4A90E2;
            --secondary-orange: #FF8A00;
            --secondary-red: #FF5252;
            --secondary-yellow: #FFD700;
            --background-light: #F3FFF7;
            --card-background: #FFFFFF;
            --text-dark: #1A1A1A;
            --text-light: #666666;
            --text-white: #FFFFFF;
            --border-color: #E5E7EB;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.12);
            --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.16);
            --shadow-lg: 0 12px 36px rgba(0, 0, 0, 0.20);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --border-radius-sm: 8px;
            --border-radius: 16px;
            --border-radius-lg: 24px;
        }

        .dark-mode {
            --primary-green: #6DD88F;
            --primary-dark: #1F4B2E;
            --primary-light: #2D5A44;
            --secondary-blue: #6AAFFF;
            --secondary-orange: #FFA033;
            --secondary-red: #FF6B6B;
            --secondary-yellow: #FFEB3B;
            --background-light: #0F2A1C;
            --card-background: #1F4B2E;
            --text-dark: #F0F7F2;
            --text-light: #A3C9B4;
            --text-white: #FFFFFF;
            --border-color: #2D5A44;
            --shadow-sm: 0 4px 16px rgba(0, 0, 0, 0.25);
            --shadow-md: 0 8px 28px rgba(0, 0, 0, 0.30);
            --shadow-lg: 0 12px 40px rgba(0, 0, 0, 0.40);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-light);
            color: var(--text-dark);
            line-height: 1.6;
            transition: var(--transition);
            padding-bottom: 85px;
            position: relative;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Enhanced Animated Background Effect */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                rgba(92, 196, 126, 0.15) 0%,
                rgba(92, 196, 126, 0.22) 25%,
                rgba(92, 196, 126, 0.15) 50%,
                rgba(92, 196, 126, 0.22) 75%,
                rgba(92, 196, 126, 0.15) 100%
            );
            background-size: 400% 100%;
            animation: slideBackground 25s ease-in-out infinite;
            z-index: -1;
            opacity: 0.7;
        }

        .dark-mode body::before {
            background: linear-gradient(
                90deg,
                rgba(109, 216, 143, 0.22) 0%,
                rgba(109, 216, 143, 0.12) 25%,
                rgba(109, 216, 143, 0.22) 50%,
                rgba(109, 216, 143, 0.12) 75%,
                rgba(109, 216, 143, 0.22) 100%
            );
            opacity: 0.4;
        }

        @keyframes slideBackground {
            0% { background-position: 400% 0; }
            100% { background-position: -400% 0; }
        }

        /* Enhanced floating elements */
        .bg-float {
            position: fixed;
            border-radius: 50%;
            z-index: -1;
            animation: float 30s ease-in-out infinite;
        }

        .bg-float:nth-child(1) {
            width: 400px;
            height: 400px;
            top: 10%;
            right: -150px;
            animation-delay: 0s;
            background: radial-gradient(circle, rgba(92, 196, 126, 0.18) 0%, rgba(92, 196, 126, 0.08) 70%, transparent 100%);
        }

        .bg-float:nth-child(2) {
            width: 300px;
            height: 300px;
            bottom: 20%;
            left: -120px;
            animation-delay: 7s;
            background: radial-gradient(circle, rgba(92, 196, 126, 0.15) 0%, rgba(92, 196, 126, 0.05) 70%, transparent 100%);
        }

        .bg-float:nth-child(3) {
            width: 250px;
            height: 250px;
            top: 60%;
            right: -100px;
            animation-delay: 14s;
            background: radial-gradient(circle, rgba(92, 196, 126, 0.12) 0%, rgba(92, 196, 126, 0.03) 70%, transparent 100%);
        }

        .dark-mode .bg-float:nth-child(1) {
            background: radial-gradient(circle, rgba(109, 216, 143, 0.25) 0%, rgba(109, 216, 143, 0.08) 70%, transparent 100%);
        }

        .dark-mode .bg-float:nth-child(2) {
            background: radial-gradient(circle, rgba(109, 216, 143, 0.20) 0%, rgba(109, 216, 143, 0.05) 70%, transparent 100%);
        }

        .dark-mode .bg-float:nth-child(3) {
            background: radial-gradient(circle, rgba(109, 216, 143, 0.18) 0%, rgba(109, 216, 143, 0.03) 70%, transparent 100%);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg) scale(1); }
            33% { transform: translateY(-40px) rotate(8deg) scale(1.05); }
            66% { transform: translateY(30px) rotate(-8deg) scale(0.95); }
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            line-height: 1.3;
        }

        /* Container with proper margins - MATCHING YOUR SAMPLE */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        @media (min-width: 768px) {
            .container {
                padding: 0 24px;
            }
        }

        /* Reduced Header Size with proper spacing */
        .dashboard-header {
            background: var(--primary-dark);
            color: var(--text-white);
            padding: 14px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow-md);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px; /* Added padding to match cards */
        }

        @media (min-width: 768px) {
            .header-container {
                padding: 0 24px;
            }
        }

        .logo-img {
            height: 36px;
            width: auto;
            object-fit: contain;
            filter: brightness(0) invert(1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        /* Theme Toggle in Header - KEPT for theme-loader.js compatibility */
        .theme-toggle-header {
            position: relative;
            background: rgba(255, 255, 255, 0.15);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            color: white;
        }

        .theme-toggle-header:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }

        /* Dashboard Content with proper spacing */
        .dashboard-content {
            padding: 25px 0 20px;
        }

        /* Rider Info Card with proper margins */
        .rider-info-card {
            background: var(--card-background);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-md);
            margin-left: 20px; /* Added left margin */
            margin-right: 20px; /* Added right margin */
        }

        @media (min-width: 768px) {
            .rider-info-card {
                margin-left: 24px;
                margin-right: 24px;
            }
        }

        .rider-header {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 15px;
        }

        .rider-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            overflow: hidden;
            border: 3px solid var(--primary-green);
            flex-shrink: 0;
        }

        .rider-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .rider-details {
            flex: 1;
        }

        .rider-name-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            flex-wrap: nowrap;
        }

        .rider-name {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-dark);
        }

        /* Status Toggle - FIXED position */
        .status-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: auto;
            padding-left: 10px;
        }

        .status-label {
            font-size: 12px;
            color: var(--text-light);
            font-weight: 500;
        }

        .toggle-switch {
            position: relative;
            width: 44px;
            height: 22px;
            flex-shrink: 0;
        }

        .toggle-checkbox {
            display: none;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--secondary-red);
            transition: .4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        .toggle-checkbox:checked + .toggle-slider {
            background-color: var(--primary-green);
        }

        .toggle-checkbox:checked + .toggle-slider:before {
            transform: translateX(22px);
        }

        /* Vehicle type under rating */
        .rider-info-stack {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .rider-rating {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .rider-rating i {
            color: var(--secondary-yellow);
            font-size: 14px;
        }

        .rating-text {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-light);
            margin-left: 2px;
        }

        .rider-vehicle {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(92, 196, 126, 0.1);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            color: var(--primary-green);
            width: fit-content;
        }

        .rider-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
            margin-top: 15px;
        }

        .stat-item {
            text-align: center;
            flex: 1;
        }

        .stat-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary-green);
            margin-bottom: 3px;
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-light);
        }

        /* Earnings Chart with proper margins */
        .earnings-chart-container {
            background: var(--card-background);
            border-radius: var(--border-radius);
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-md);
            height: 180px;
            margin-left: 20px; /* Added left margin */
            margin-right: 20px; /* Added right margin */
        }

        @media (min-width: 768px) {
            .earnings-chart-container {
                margin-left: 24px;
                margin-right: 24px;
            }
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .chart-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .chart-period {
            font-size: 12px;
            color: var(--text-light);
        }

        .chart-wrapper {
            position: relative;
            height: 120px;
            width: 100%;
        }

        /* Incoming Jobs Section with proper margins */
        .incoming-jobs-section {
            margin-bottom: 20px;
            margin-left: 20px; /* Added left margin */
            margin-right: 20px; /* Added right margin */
        }

        @media (min-width: 768px) {
            .incoming-jobs-section {
                margin-left: 24px;
                margin-right: 24px;
            }
        }

        .section-title {
            font-size: 16px;
            color: var(--text-dark);
            font-weight: 600;
            margin-bottom: 15px;
        }

        .jobs-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Incoming Job Card with proper margins */
        .incoming-job-card {
            background: var(--card-background);
            border-radius: var(--border-radius);
            padding: 18px;
            box-shadow: var(--shadow-lg);
            border-left: 5px solid var(--secondary-blue);
            animation: pulseBorder 2s infinite;
        }

        @keyframes pulseBorder {
            0%, 100% { border-left-color: var(--secondary-blue); }
            50% { border-left-color: var(--primary-green); }
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            gap: 10px;
        }

        .job-title-container {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
            min-width: 0;
        }

        .job-image {
            width: 50px;
            height: 50px;
            border-radius: var(--border-radius-sm);
            overflow: hidden;
            flex-shrink: 0;
        }

        .job-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .job-title-text {
            min-width: 0;
        }

        .job-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-dark);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .job-timer-container {
            flex-shrink: 0;
        }

        .job-timer {
            background: rgba(92, 196, 126, 0.1);
            color: var(--primary-green);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: 700;
            font-family: 'Poppins', monospace;
            white-space: nowrap;
            display: inline-block;
        }

        /* Job details in 2 columns */
        .job-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 18px;
        }

        .job-detail-item {
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 0;
        }

        .job-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(92, 196, 126, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-green);
            flex-shrink: 0;
        }

        .job-detail-content {
            flex: 1;
            min-width: 0;
        }

        .job-detail-label {
            font-size: 11px;
            color: var(--text-light);
            margin-bottom: 2px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            white-space: nowrap;
        }

        .job-detail-value {
            font-size: 13px;
            color: var(--text-dark);
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .job-actions {
            display: flex;
            gap: 10px;
        }

        .job-action-btn {
            flex: 1;
            padding: 11px;
            border: none;
            border-radius: var(--border-radius-sm);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            min-width: 0;
        }

        .decline-btn {
            background: rgba(255, 82, 82, 0.1);
            color: var(--secondary-red);
            border: 1.5px solid var(--secondary-red);
        }

        .decline-btn:hover {
            background: var(--secondary-red);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 82, 82, 0.3);
        }

        .accept-btn {
            background: rgba(92, 196, 126, 0.1);
            color: var(--primary-green);
            border: 1.5px solid var(--primary-green);
        }

        .accept-btn:hover {
            background: var(--primary-green);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(92, 196, 126, 0.3);
        }

        /* Job Status Card with proper margins */
        .job-status-card {
            background: var(--card-background);
            border-radius: var(--border-radius);
            padding: 18px;
            box-shadow: var(--shadow-md);
            margin-bottom: 20px;
            text-align: center;
            border-left: 5px solid var(--secondary-yellow);
            margin-left: 20px; /* Added left margin */
            margin-right: 20px; /* Added right margin */
        }

        @media (min-width: 768px) {
            .job-status-card {
                margin-left: 24px;
                margin-right: 24px;
            }
        }

        .status-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 12px;
        }

        .status-icon {
            font-size: 18px;
            color: var(--secondary-yellow);
        }

        .status-title {
            font-size: 15px;
            font-weight: 700;
            color: var(--text-dark);
        }

        .status-action-btn {
            background: var(--primary-green);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: var(--border-radius-sm);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .status-action-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        /* Empty State with proper margins */
        .empty-state {
            text-align: center;
            padding: 25px 18px;
            background: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-md);
            margin-bottom: 20px;
            margin-left: 20px; /* Added left margin */
            margin-right: 20px; /* Added right margin */
        }

        @media (min-width: 768px) {
            .empty-state {
                margin-left: 24px;
                margin-right: 24px;
            }
        }

        .empty-icon {
            font-size: 32px;
            color: var(--border-color);
            margin-bottom: 10px;
        }

        .empty-title {
            font-size: 14px;
            color: var(--text-dark);
            margin-bottom: 6px;
        }

        .empty-text {
            font-size: 12px;
            color: var(--text-light);
            max-width: 220px;
            margin: 0 auto 12px;
        }

        /* Professional Bottom Navigation - Matches sample */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--card-background);
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 12px 0 18px;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
            z-index: 1000;
            border-top: 1px solid var(--border-color);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--text-light);
            transition: var(--transition);
            flex: 1;
            padding: 8px 0;
        }

        .nav-icon {
            width: 24px;
            height: 24px;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .nav-item i {
            font-size: 20px;
        }

        .nav-text {
            font-size: 12px;
            font-weight: 500;
            transition: var(--transition);
        }

        .nav-item.active {
            color: var(--primary-green);
        }

        .nav-item.active .nav-text {
            font-weight: 600;
        }

        .nav-item:hover {
            color: var(--primary-green);
        }

        /* KEPT: Enhanced Theme-Tailored Loader - theme-loader.js will use this */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            transition: opacity 0.3s, visibility 0.3s;
            opacity: 0;
            visibility: hidden;
            backdrop-filter: blur(6px);
        }

        .loader.active {
            opacity: 1;
            visibility: visible;
        }

        .loader {
            background: rgba(243, 255, 247, 0.95);
        }

        .dark-mode .loader {
            background: rgba(15, 42, 28, 0.97);
        }

        .loader-spinner {
            width: 70px;
            height: 70px;
            border: 4px solid rgba(92, 196, 126, 0.2);
            border-radius: 50%;
            border-top-color: var(--primary-green);
            animation: spin 1.2s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;
            margin-bottom: 25px;
            position: relative;
        }

        .loader-spinner::before {
            content: '';
            position: absolute;
            top: -8px;
            left: -8px;
            right: -8px;
            bottom: -8px;
            border: 4px solid transparent;
            border-radius: 50%;
            border-top-color: rgba(92, 196, 126, 0.1);
            animation: spin 1.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite reverse;
        }

        .dark-mode .loader-spinner {
            border-color: rgba(109, 216, 143, 0.25);
            border-top-color: var(--primary-green);
        }

        .dark-mode .loader-spinner::before {
            border-top-color: rgba(109, 216, 143, 0.15);
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loader-text {
            font-size: 18px;
            font-weight: 500;
            color: var(--text-dark);
            letter-spacing: 0.5px;
        }

        .dark-mode .loader-text {
            color: var(--text-light);
        }

        /* KEPT: Notification styles */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: var(--primary-green);
            color: white;
            padding: 12px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            z-index: 4000;
            font-weight: 500;
            transform: translateX(150%);
            transition: transform 0.3s ease-out;
            max-width: 280px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--secondary-red);
        }

        .notification.warning {
            background: var(--secondary-orange);
        }

        /* Responsive Adjustments - MATCHING SAMPLE */
        @media (max-width: 600px) {
            .container {
                padding: 0 16px;
            }
            
            .header-container {
                padding: 0 16px;
            }
            
            .dashboard-content {
                padding: 20px 0 15px;
            }
            
            .rider-header {
                gap: 12px;
            }
            
            .rider-avatar {
                width: 60px;
                height: 60px;
            }
            
            .rider-name {
                font-size: 18px;
            }
            
            /* Cards have proper spacing from edges */
            .rider-info-card,
            .earnings-chart-container,
            .incoming-jobs-section,
            .job-status-card,
            .empty-state {
                margin-left: 16px;
                margin-right: 16px;
            }
            
            /* FIXED: Status toggle stays in same line */
            .rider-name-row {
                flex-direction: row;
                align-items: center;
                gap: 10px;
            }
            
            .status-toggle {
                margin-left: auto;
                padding-left: 10px;
            }
            
            /* FIXED: Job header layout for mobile */
            .job-header {
                flex-direction: row;
                align-items: center;
            }
            
            .job-title-container {
                min-width: 0;
            }
            
            .job-title {
                font-size: 15px;
            }
            
            .job-timer-container {
                margin-left: auto;
            }
            
            /* FIXED: Job details ALWAYS show 2 in a line */
            .job-details {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            /* FIXED: Prevent single column display on mobile */
            .job-detail-item {
                min-height: 50px;
            }
            
            .job-detail-label {
                font-size: 10px;
            }
            
            .job-detail-value {
                font-size: 12px;
            }
            
            .job-actions {
                flex-wrap: nowrap;
            }
            
            .job-action-btn {
                min-width: 110px;
                padding: 10px;
                font-size: 13px;
            }
        }

        @media (max-width: 360px) {
            /* For very small screens, adjust spacing */
            .job-details {
                gap: 8px;
            }
            
            .job-icon {
                width: 28px;
                height: 28px;
                font-size: 12px;
            }
            
            .job-detail-label {
                font-size: 9px;
            }
            
            .job-detail-value {
                font-size: 11px;
            }
            
            .rider-name {
                font-size: 16px;
            }
            
            .status-label {
                font-size: 10px;
            }
            
            .toggle-switch {
                width: 40px;
                height: 20px;
            }
            
            .toggle-slider:before {
                height: 14px;
                width: 14px;
            }
            
            .toggle-checkbox:checked + .toggle-slider:before {
                transform: translateX(20px);
            }
        }

        @media (min-width: 601px) and (max-width: 767px) {
            .job-details {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
        }

        @media (min-width: 768px) {
            .dashboard-content {
                padding: 30px 0 25px;
            }
            
            .earnings-chart-container {
                height: 200px;
            }
            
            .chart-wrapper {
                height: 140px;
            }
            
            .job-details {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Enhanced Background Floating Elements -->
    <div class="bg-float"></div>
    <div class="bg-float"></div>
    <div class="bg-float"></div>

    <!-- Reduced Header Size -->
    <header class="dashboard-header">
        <div class="header-container">
            <div class="logo-container">
                <img src="../img/logo.png" alt="ErrandX" class="logo-img">
            </div>
            
            <!-- KEPT: Theme toggle button (theme-loader.js will enhance it) -->
            <div class="user-info">
                <button class="theme-toggle-header" id="themeToggleHeader">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Dashboard Content -->
    <main class="dashboard-content container">
        <!-- Rider Info Card -->
        <section class="rider-info-section">
            <div class="rider-info-card">
                <div class="rider-header">
                    <div class="rider-avatar">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Usman Ahmad">
                    </div>
                    <div class="rider-details">
                        <div class="rider-name-row">
                            <h1 class="rider-name">Usman Ahmad</h1>
                            <div class="status-toggle">
                                <span class="status-label" id="statusText">ONLINE</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" class="toggle-checkbox" id="statusToggle" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="rider-info-stack">
                            <div class="rider-rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                                <span class="rating-text">4.8 rating</span>
                            </div>
                            <div class="rider-vehicle">
                                <i class="fas fa-motorcycle"></i> Bike | 
                                <i class="fas fa-map-marker-alt"></i> Gusau
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Rider Stats -->
                <div class="rider-stats">
                    <div class="stat-item">
                        <div class="stat-value">5</div>
                        <div class="stat-label">Total Jobs</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">â‚¦6,500</div>
                        <div class="stat-label">Total Earnings</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Earnings Chart -->
        <section class="earnings-chart-section">
            <div class="earnings-chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">Earnings Trend</h3>
                    <span class="chart-period">Last 7 days</span>
                </div>
                <div class="chart-wrapper">
                    <canvas id="earningsChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Incoming Jobs Section -->
        <section class="incoming-jobs-section" id="incomingJobsSection">
            <h2 class="section-title">Incoming Jobs</h2>
            
            <div class="jobs-container">
                <!-- Job 1: Gas Refill -->
                <div class="incoming-job-card" id="incomingJobCard1">
                    <div class="job-header">
                        <div class="job-title-container">
                            <div class="job-image">
                                <img src="../img/3.png" alt="Gas Refill">
                            </div>
                            <div class="job-title-text">
                                <h3 class="job-title">Gas Refill Delivery</h3>
                            </div>
                        </div>
                        <div class="job-timer-container">
                            <div class="job-timer" id="jobTimer1">02:00</div>
                        </div>
                    </div>
                    
                    <!-- Job details in 2 columns -->
                    <div class="job-details">
                        <div class="job-detail-item">
                            <div class="job-icon">
                                <i class="fas fa-fire"></i>
                            </div>
                            <div class="job-detail-content">
                                <div class="job-detail-label">Type</div>
                                <div class="job-detail-value">Gas Refill ðŸ”¥</div>
                            </div>
                        </div>
                        
                        <div class="job-detail-item">
                            <div class="job-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div class="job-detail-content">
                                <div class="job-detail-label">Pickup Location</div>
                                <div class="job-detail-value">Sabon Gari</div>
                            </div>
                        </div>
                        
                        <div class="job-detail-item">
                            <div class="job-icon">
                                <i class="fas fa-route"></i>
                            </div>
                            <div class="job-detail-content">
                                <div class="job-detail-label">Distance</div>
                                <div class="job-detail-value">3.2 km</div>
                            </div>
                        </div>
                        
                        <div class="job-detail-item">
                            <div class="job-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="job-detail-content">
                                <div class="job-detail-label">Earning</div>
                                <div class="job-detail-value">â‚¦1,200</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="job-actions">
                        <button class="job-action-btn decline-btn" data-job="1">
                            <i class="fas fa-times"></i> Decline
                        </button>
                        <button class="job-action-btn accept-btn" data-job="1">
                            <i class="fas fa-check"></i> Accept
                        </button>
                    </div>
                </div>

                <!-- Job 2: Package Delivery -->
                <div class="incoming-job-card" id="incomingJobCard2">
                    <div class="job-header">
                        <div class="job-title-container">
                            <div class="job-image">
                                <img src="../img/2.png" alt="Package Delivery">
                            </div>
                            <div class="job-title-text">
                                <h3 class="job-title">Package Delivery</h3>
                            </div>
                        </div>
                        <div class="job-timer-container">
                            <div class="job-timer" id="jobTimer2">01:45</div>
                        </div>
                    </div>
                    
                    <!-- Job details in 2 columns -->
                    <div class="job-details">
                        <div class="job-detail-item">
                            <div class="job-icon">
                                <i class="fas fa-box"></i>
                            </div>
                            <div class="job-detail-content">
                                <div class="job-detail-label">Type</div>
                                <div class="job-detail-value">Package ðŸ“¦</div>
                            </div>
                        </div>
                        
                        <div class="job-detail-item">
                            <div class="job-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div class="job-detail-content">
                                <div class="job-detail-label">Pickup Location</div>
                                <div class="job-detail-value">Main Market</div>
                            </div>
                        </div>
                        
                        <div class="job-detail-item">
                            <div class="job-icon">
                                <i class="fas fa-route"></i>
                            </div>
                            <div class="job-detail-content">
                                <div class="job-detail-label">Distance</div>
                                <div class="job-detail-value">4.5 km</div>
                            </div>
                        </div>
                        
                        <div class="job-detail-item">
                            <div class="job-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="job-detail-content">
                                <div class="job-detail-label">Earning</div>
                                <div class="job-detail-value">â‚¦1,500</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="job-actions">
                        <button class="job-action-btn decline-btn" data-job="2">
                            <i class="fas fa-times"></i> Decline
                        </button>
                        <button class="job-action-btn accept-btn" data-job="2">
                            <i class="fas fa-check"></i> Accept
                        </button>
                    </div>
                </div>
            </div>

            <!-- Job Status (Shown after acceptance) -->
            <div class="job-status-card" id="jobStatusCard" style="display: none;">
                <div class="status-header">
                    <div class="status-icon">ðŸŸ¡</div>
                    <h3 class="status-title">Heading to Pickup</h3>
                </div>
                <p style="margin-bottom: 15px; color: var(--text-light); font-size: 13px;">
                    You've accepted the job. Please proceed to pickup location.
                </p>
                <button class="status-action-btn" id="viewOrderDetailsBtn">
                    <i class="fas fa-clipboard-list"></i> View Order Details
                </button>
            </div>
        </section>

        <!-- Empty State (when offline) -->
        <div class="empty-state" id="offlineState" style="display: none;">
            <div class="empty-icon">
                <i class="fas fa-moon"></i>
            </div>
            <h3 class="empty-title">You're Offline</h3>
            <p class="empty-text">Go online to receive job requests and notifications.</p>
        </div>
    </main>

    <!-- Professional Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="index.html" class="nav-item active">
            <div class="nav-icon">
                <i class="fas fa-home"></i>
            </div>
            <span class="nav-text">Home</span>
        </a>
        
        <a href="jobs.html" class="nav-item">
            <div class="nav-icon">
                <i class="fas fa-clipboard-list"></i>
            </div>
            <span class="nav-text">Jobs</span>
        </a>
        
        <a href="earnings.html" class="nav-item">
            <div class="nav-icon">
                <i class="fas fa-money-bill-wave"></i>
            </div>
            <span class="nav-text">Earnings</span>
        </a>
        
        <a href="profile.html" class="nav-item">
            <div class="nav-icon">
                <i class="fas fa-user"></i>
            </div>
            <span class="nav-text">Profile</span>
        </a>
    </nav>

    <!-- KEPT: Enhanced Theme-Tailored Loader (theme-loader.js will manage it) -->
    <div class="loader" id="pageLoader">
        <div class="loader-spinner"></div>
        <p class="loader-text">Loading...</p>
    </div>

    <!-- KEPT: Notification Element (theme-loader.js will use it) -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">Notification message here</span>
    </div>

    <script>
        // Theme Toggle - Now handled by theme-loader.js but kept for backward compatibility
        const themeToggleHeader = document.getElementById('themeToggleHeader');
        const themeIconHeader = themeToggleHeader.querySelector('i');
        
        // Check for saved theme (theme-loader.js will handle this)
        const savedTheme = localStorage.getItem('theme') || 'light';

        // Apply saved theme initially (theme-loader.js will handle this too)
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-mode');
            themeIconHeader.className = 'fas fa-sun';
        } else {
            document.body.classList.remove('dark-mode');
            themeIconHeader.className = 'fas fa-moon';
        }

        // Theme toggle event - kept for backward compatibility
        // theme-loader.js will enhance this functionality
        themeToggleHeader.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            themeIconHeader.className = isDark ? 'fas fa-sun' : 'fas fa-moon';
            
            // If theme-loader.js is loaded, use its notification system
            if (window.notificationManager) {
                window.notificationManager.show(`Theme switched to ${isDark ? 'dark' : 'light'} mode`, 'success');
            }
        });
        
        // Loader - Now managed by theme-loader.js but element kept
        const pageLoader = document.getElementById('pageLoader');
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notificationText');
        
        // Status toggle elements
        const statusToggle = document.getElementById('statusToggle');
        const statusText = document.getElementById('statusText');
        const offlineState = document.getElementById('offlineState');
        const incomingJobsSection = document.getElementById('incomingJobsSection');
        
        // Job elements
        const jobStatusCard = document.getElementById('jobStatusCard');
        const viewOrderDetailsBtn = document.getElementById('viewOrderDetailsBtn');
        
        // Variables
        let isOnline = true;
        let timerIntervals = {};
        let jobTimers = {
            1: 120, // 2 minutes for job 1
            2: 105  // 1:45 for job 2
        };
        let jobAccepted = false;
        
        // Earnings Chart
        let earningsChart;
        
        // Simulate initial page load - theme-loader.js handles this
        // But we'll also initialize our dashboard functionality
        window.addEventListener('load', () => {
            setTimeout(() => {
                // If theme-loader.js is loaded, it will handle the loader
                if (window.loaderManager) {
                    // We can still manually hide if needed
                    // window.loaderManager.hide();
                } else {
                    // Fallback to original loader
                    pageLoader.classList.remove('active');
                }
                
                initializeEarningsChart();
                if (isOnline) {
                    startAllJobTimers();
                }
            }, 800);
        });
        
        // Initialize earnings chart
        function initializeEarningsChart() {
            const ctx = document.getElementById('earningsChart').getContext('2d');
            
            // Chart data
            const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
            const earnings = [800, 1200, 900, 1500, 1800, 2000, 1600];
            
            // Get computed styles for theme colors
            const computedStyle = getComputedStyle(document.documentElement);
            const primaryGreen = computedStyle.getPropertyValue('--primary-green').trim();
            const primaryLight = computedStyle.getPropertyValue('--primary-light').trim();
            const textLight = computedStyle.getPropertyValue('--text-light').trim();
            const borderColor = computedStyle.getPropertyValue('--border-color').trim();
            
            earningsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: days,
                    datasets: [{
                        label: 'Daily Earnings (â‚¦)',
                        data: earnings,
                        borderColor: primaryGreen,
                        backgroundColor: primaryLight + '80',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: primaryGreen,
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#fff',
                            bodyColor: '#fff',
                            borderColor: primaryGreen,
                            borderWidth: 1,
                            callbacks: {
                                label: function(context) {
                                    return `â‚¦${context.parsed.y.toLocaleString()}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: borderColor,
                                drawBorder: false
                            },
                            ticks: {
                                color: textLight,
                                font: {
                                    size: 11
                                }
                            }
                        },
                        y: {
                            grid: {
                                color: borderColor,
                                drawBorder: false
                            },
                            ticks: {
                                color: textLight,
                                font: {
                                    size: 11
                                },
                                callback: function(value) {
                                    return 'â‚¦' + value;
                                }
                            },
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        
        // Show notification function - works with both theme-loader.js and fallback
        function showNotification(message, type = 'success') {
            // Use theme-loader.js notification manager if available
            if (window.notificationManager) {
                window.notificationManager.show(message, type);
            } else {
                // Fallback to original notification system
                notificationText.textContent = message;
                notification.className = 'notification';
                notification.classList.add(type);
                notification.classList.add('show');
                
                // Hide after 3 seconds
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
        }
        
        // Status toggle functionality
        statusToggle.addEventListener('change', function() {
            setOnlineStatus(this.checked);
        });
        
        function setOnlineStatus(online) {
            isOnline = online;
            
            if (online) {
                statusText.textContent = 'ONLINE';
                statusToggle.checked = true;
                offlineState.style.display = 'none';
                incomingJobsSection.style.display = 'block';
                
                showNotification('You are now ONLINE and will receive job requests', 'success');
                
                // Start job timers
                startAllJobTimers();
            } else {
                statusText.textContent = 'OFFLINE';
                statusToggle.checked = false;
                incomingJobsSection.style.display = 'none';
                offlineState.style.display = 'block';
                
                showNotification('You are now OFFLINE and will not receive notifications', 'warning');
                
                // Stop all active timers
                stopAllJobTimers();
            }
        }
        
        // Start all job timers
        function startAllJobTimers() {
            if (!isOnline) return;
            
            // Start timer for job 1
            startJobTimer(1);
            
            // Start timer for job 2
            startJobTimer(2);
        }
        
        // Stop all job timers
        function stopAllJobTimers() {
            Object.keys(timerIntervals).forEach(jobId => {
                clearInterval(timerIntervals[jobId]);
            });
            timerIntervals = {};
        }
        
        // Start timer for specific job
        function startJobTimer(jobId) {
            if (timerIntervals[jobId]) {
                clearInterval(timerIntervals[jobId]);
            }
            
            updateJobTimerDisplay(jobId);
            
            timerIntervals[jobId] = setInterval(() => {
                jobTimers[jobId]--;
                updateJobTimerDisplay(jobId);
                
                if (jobTimers[jobId] <= 0) {
                    clearInterval(timerIntervals[jobId]);
                    document.getElementById(`jobTimer${jobId}`).textContent = '00:00';
                    
                    // Auto-decline after time expires
                    if (!jobAccepted) {
                        autoDeclineJob(jobId);
                    }
                }
            }, 1000);
        }
        
        // Update job timer display
        function updateJobTimerDisplay(jobId) {
            const timerElement = document.getElementById(`jobTimer${jobId}`);
            const minutes = Math.floor(jobTimers[jobId] / 60);
            const seconds = jobTimers[jobId] % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Timer color is green (already set in CSS)
            if (jobTimers[jobId] <= 30) {
                timerElement.style.background = 'rgba(92, 196, 126, 0.3)';
            } else {
                timerElement.style.background = 'rgba(92, 196, 126, 0.1)';
            }
        }
        
        // Auto-decline job when timer expires
        function autoDeclineJob(jobId) {
            document.getElementById(`incomingJobCard${jobId}`).style.display = 'none';
            showNotification(`Job ${jobId} auto-declined due to no response`, 'error');
            
            // Simulate new job after 10 seconds
            if (isOnline) {
                setTimeout(() => {
                    resetJob(jobId);
                }, 10000);
            }
        }
        
        // Reset job
        function resetJob(jobId) {
            if (!isOnline || jobAccepted) return;
            
            // Reset timer
            jobTimers[jobId] = jobId === 1 ? 120 : 105;
            
            // Show job card
            document.getElementById(`incomingJobCard${jobId}`).style.display = 'block';
            
            // Start timer
            startJobTimer(jobId);
            
            showNotification(`New job ${jobId === 1 ? 'Gas Refill' : 'Package Delivery'} available`, 'success');
        }
        
        // Set up job button event listeners
        document.querySelectorAll('.decline-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const jobId = this.getAttribute('data-job');
                declineJob(jobId);
            });
        });
        
        document.querySelectorAll('.accept-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const jobId = this.getAttribute('data-job');
                acceptJob(jobId);
            });
        });
        
        // Decline job
        function declineJob(jobId) {
            if (timerIntervals[jobId]) {
                clearInterval(timerIntervals[jobId]);
            }
            
            jobAccepted = false;
            document.getElementById(`incomingJobCard${jobId}`).style.display = 'none';
            showNotification(`Job ${jobId} declined`, 'error');
            
            // Simulate new job after 10 seconds
            if (isOnline) {
                setTimeout(() => {
                    resetJob(jobId);
                }, 10000);
            }
        }
        
        // Accept job
        function acceptJob(jobId) {
            // Stop all timers
            Object.keys(timerIntervals).forEach(id => {
                clearInterval(timerIntervals[id]);
            });
            
            // Hide all job cards
            document.querySelectorAll('.incoming-job-card').forEach(card => {
                card.style.display = 'none';
            });
            
            jobAccepted = true;
            jobStatusCard.style.display = 'block';
            
            showNotification('Job accepted! Status: Heading to Pickup', 'success');
            
            // Update rider stats
            updateRiderStats(jobId);
            
            // Simulate new jobs after 30 seconds
            setTimeout(() => {
                if (isOnline) {
                    resetAllJobs();
                }
            }, 30000);
        }
        
        // Reset all jobs
        function resetAllJobs() {
            jobAccepted = false;
            jobStatusCard.style.display = 'none';
            
            // Reset job 1
            jobTimers[1] = 120;
            document.getElementById('incomingJobCard1').style.display = 'block';
            
            // Reset job 2
            jobTimers[2] = 105;
            document.getElementById('incomingJobCard2').style.display = 'block';
            
            // Start timers
            startAllJobTimers();
        }
        
        // Update rider stats after job completion
        function updateRiderStats(jobId) {
            // In a real app, this would update from backend
            const statValueElements = document.querySelectorAll('.stat-value');
            const totalJobsElement = statValueElements[0];
            const totalEarningsElement = statValueElements[1];
            
            // Update total jobs
            let totalJobs = parseInt(totalJobsElement.textContent);
            totalJobsElement.textContent = (totalJobs + 1).toString();
            
            // Update total earnings based on job
            let totalEarnings = parseInt(totalEarningsElement.textContent.replace('â‚¦', '').replace(',', ''));
            const jobEarning = jobId === 1 ? 1200 : 1500;
            totalEarningsElement.textContent = 'â‚¦' + (totalEarnings + jobEarning).toLocaleString();
            
            // Update chart with new earning
            const chartData = earningsChart.data.datasets[0].data;
            const todayIndex = new Date().getDay() - 1; // Get index for today (0-6)
            if (todayIndex >= 0 && todayIndex < chartData.length) {
                chartData[todayIndex] += jobEarning;
                earningsChart.update();
            }
        }
        
        // View order details
        viewOrderDetailsBtn.addEventListener('click', () => {
            // Use theme-loader.js loader if available
            if (window.loaderManager) {
                window.loaderManager.show('Loading order details...');
                setTimeout(() => {
                    window.loaderManager.hide();
                    showNotification('Navigating to order details...', 'success');
                }, 1000);
            } else {
                // Fallback to original loader
                pageLoader.classList.add('active');
                setTimeout(() => {
                    pageLoader.classList.remove('active');
                    showNotification('Navigating to order details...', 'success');
                }, 1000);
            }
        });
        
        // Navigation click handler
        const navItems = document.querySelectorAll('.nav-item');
        navItems.forEach(item => {
            item.addEventListener('click', (e) => {
                // Don't prevent default for active page (Home page in this case)
                if (!item.classList.contains('active')) {
                    // Don't prevent default - let the link navigate normally
                    // Show loader (theme-loader.js handles this)
                    if (window.loaderManager) {
                        window.loaderManager.show('Navigating...');
                    }
                    
                    // Update active nav item
                    navItems.forEach(nav => nav.classList.remove('active'));
                    item.classList.add('active');
                    
                    // Get href from anchor tag
                    const href = item.getAttribute('href');
                    
                    // Only prevent default and simulate if it's a non-navigation link
                    if (href === '#') {
                        e.preventDefault();
                        
                        // Simulate page navigation for demo
                        setTimeout(() => {
                            if (window.loaderManager) {
                                window.loaderManager.hide();
                            }
                        }, 800);
                    }
                    // For actual navigation links (with proper href), let them work normally
                    // The loader will show briefly until the page loads
                } else {
                    // If it's the home link (active), prevent default to stay on same page
                    e.preventDefault();
                }
            });
        });
        
        // Handle image errors with fallback
        const images = document.querySelectorAll('img');
        images.forEach(img => {
            img.addEventListener('error', function() {
                if (this.parentElement.classList.contains('rider-avatar')) {
                    // Create fallback avatar
                    const parent = this.parentElement;
                    parent.innerHTML = '<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:var(--primary-green);color:white;font-size:24px;"><i class="fas fa-user"></i></div>';
                } else if (this.classList.contains('logo-img')) {
                    // Create text fallback for logo
                    const parent = this.parentElement;
                    parent.innerHTML = '<span style="color:white; font-weight:bold; font-size:20px;">ErrandX</span>';
                } else if (this.parentElement.classList.contains('job-image')) {
                    // Create fallback service icon
                    const parent = this.parentElement;
                    const jobType = this.alt || '';
                    let iconClass = 'fas fa-box';
                    if (jobType.includes('Gas') || jobType.includes('Refill')) iconClass = 'fas fa-fire';
                    if (jobType.includes('Package') || jobType.includes('Delivery')) iconClass = 'fas fa-box';
                    if (jobType.includes('Repair')) iconClass = 'fas fa-tools';
                    if (jobType.includes('Laundry')) iconClass = 'fas fa-tshirt';
                    
                    parent.innerHTML = `<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(92, 196, 126, 0.1);color:var(--primary-green);font-size:24px;"><i class="${iconClass}"></i></div>`;
                }
            });
        });
        
        // Network status - theme-loader.js handles this but we keep fallback
        window.addEventListener('online', () => {
            console.log('Network connection restored');
        });
        
        window.addEventListener('offline', () => {
            // theme-loader.js handles this, but we keep fallback
            if (!window.loaderManager) {
                pageLoader.classList.add('active');
                pageLoader.innerHTML = `
                    <div style="text-align:center;">
                        <i class="fas fa-wifi-slash" style="font-size:48px;color:var(--text-light);margin-bottom:20px;"></i>
                        <p class="loader-text" style="margin-bottom:20px;">No Internet Connection</p>
                        <button onclick="location.reload()" style="background:var(--primary-green);color:white;border:none;padding:10px 20px;border-radius:20px;cursor:pointer;">
                            Retry
                        </button>
                    </div>
                `;
            }
        });
    </script>
</body>
</html>